
(function(win, input){

	function base64_decode(s){
		// for modern browsers
		// TODO: test the worst case (i.e. the custom code) if we are requesting this with phantomJS for testing
		if( win.atob ) return win.atob(s);
		// for IE and some mobile ones
		var out = "",
			chr1, chr2, chr3,
			enc1, enc2, enc3, enc4,
			i,len=s.length, iO='indexOf',cA='charAt', fCC=String.fromCharCode,
			lut = "ABCDEFGHIJKLMNOP" +
			      "QRSTUVWXYZabcdef" +
			      "ghijklmnopqrstuv" +
			      "wxyz0123456789+/" +
			      "=";
		for(i=0;i<len;){
			// get the encoded bytes
			enc1 = lut[iO](s[cA](i++));
			enc2 = lut[iO](s[cA](i++));
			enc3 = lut[iO](s[cA](i++));
			enc4 = lut[iO](s[cA](i++));
			// turn them into chars
			chr1 = (enc1 << 2) | (enc2 >> 4);
			chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
			chr3 = ((enc3 & 3) << 6) | enc4;
			out += fCC(chr1);
			if (enc3 != 64) {
				out += fCC(chr2);
			}
			if (enc4 != 64) {
				out += fCC(chr3);
			}
		}
		return out;
	}
	/**
	 * Load a script in HEAD
	 *
	 * pass either uri or inner. one will set the SRC the other the .text
	 */
	function loadScript(uri, inner, sf) {
		var h = document.getElementsByTagName('head')[0] || document.documentElement,
			s = document.createElement('script');
		if( !sf ){
			s.type = 'text/javascript';
		}else{
			s.type = 'text/x-safeframe';
		}
		if( inner ){
			s.text = inner;
		}else{
			s.src = uri;
		}
		return h.appendChild(s);
	}

	/* TODO: pass input as plain JSON, not a string... and then assign it to
	 * win.DARLA_CONFIG=input;
	 * and call a new public method that will parse the positions list (currently inline-code in boot.js:_get_tags()
	*/
	loadScript( false, base64_decode(input), true );
	loadScript( "https://s.yimg.com/rq/darla/boot.js", false, false);

}(window, "eyJwb3NpdGlvbnMiOlt7ImlkIjoiUklDSCIsImh0bWwiOiI8ZGl2IGlkPVwiYS1kMTQ1MDhcIj5cbjwhLS0gQWRQbGFjZW1lbnQgOiB5OTYzODk2MTQ1IC0tPjwhLS0gVmVyaXpvbiBNZWRpYSBTU1AgQmFubmVyQWQgRHNwSWQ6MCwgU2VhdElkOjEzMTIzLCBEc3BDcklkOnBhc3NiYWNrLTEwMDkwLCBDcnNDcklkOiAtLT48aW1nIHNyYz1cImh0dHBzOlwvXC91cy1lYXN0LTEub25lbW9iaWxlLnlhaG9vLmNvbVwvYWRtYXhcL2FkRXZlbnQuZG8/dGlkaT03NzA4MzEyMzEmYW1wO3NpdGVwaWQ9MjIzMjUwJmFtcDtwb3NpPTk0MTc1MiZhbXA7Z3JwPSUzRiUzRiUzRiZhbXA7bmw9MTYxNTY0MTM5NzU2MCZhbXA7cnRzPTE2MTU2NDEzOTc0OTImYW1wO3BpeD0xJmFtcDtldD0xJmFtcDthPVRvTXI2VEV3TGpIQk91ZGhZRXk2NFFGOU1Ua3dMZ0FBQUFEVGxKSkktMCZhbXA7bT1hWEF0TVRBdE1qSXROQzB4TXpVLiZhbXA7Yj1NVE14TWpNN1RHRjBRVTBnTFNCU2RXSnBZMjl1SUZCaGMzTmlZV05yT3o4X1B6czdPenMxTWpOa1ptSmpNV1JsWlRJME1UQTBPRGRqTjJGak9HSTFPRGxoTmprek16c3RNVHN4TmpFMU5qTTROakF3T3pzd093Li4mYW1wO3VpZD15LTlRS2cxSVJFMnVvRnZadHp1UTdmR2toWmNXZXIlN0VBJmFtcDt0c3JjdHlwZT0yJmFtcDt4ZGk9UHo4X2ZEOF9QM3dfUHo5OE1BLi4mYW1wO3hvaT1NSHhEVDB3LiZhbXA7aGI9dHJ1ZSZhbXA7dHlwZT0wJmFtcDthZj03JmFtcDticnhkUHVibGlzaGVySWQ9MjA3NjQ5ODI5MDQmYW1wO2JyeGRTaXRlSWQ9Nzg3ODA1MSZhbXA7ZGV0eT01XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7d2lkdGg6MXB4O2hlaWdodDoxcHg7Ym9yZGVyOjA7XCIgd2lkdGg9XCIxXCIgaGVpZ2h0PVwiMVwiIGFsdD1cIlwiXC8+PGltZyBzcmM9XCJodHRwczpcL1wvcy55aW1nLmNvbVwvY3ZcL2FwaXYyXC9kZWZhdWx0XC9hZHhfYmFja3VwYWRzXC9icmF6aWxcL0lOVExfTWFpbF9Mb2dpbl9GaWxsZXJfMDcyMF9FUy5qcGdcIiB3aWR0aD1cIjE0NDBcIiBoZWlnaHQ9XCIxMDI0XCJcLz48c2NyaXB0IHR5cGU9XCJ0ZXh0XC9qYXZhc2NyaXB0XCIgc3JjPVwiaHR0cHM6XC9cL3NlcnZpY2UuaWRzeW5jLmFuYWx5dGljcy55YWhvby5jb21cL3NwXC92MFwvcGl4ZWxzP3BpeGVsSWRzPTU4MjY5LDU4MzAxLDU4Mjk0LDU1OTUzLDU1OTg2LDU3OTI2LDU1OTM5LDU4MjY3LDU1OTczLDU1OTU4JnJlZmVycmVyPSZsaW1pdD0xMiZ1c19wcml2YWN5PW51bGwmanM9MSZfb3JpZ2luPTEmZ2Rwcj0wJmV1Y29uc2VudD1cIj48XC9zY3JpcHQ+PCEtLSBBZHMgYnkgVmVyaXpvbiBNZWRpYSBTU1AgLSBPcHRpbWl6ZWQgYnkgTkVYQUdFIC0gU2F0dXJkYXksIE1hcmNoIDEzLCAyMDIxIGF0IDg6MTY6MzcgQU0gRWFzdGVybiBTdGFuZGFyZCBUaW1lIC0tPjxcL2Rpdj4iLCJsb3dIVE1MIjoiIiwibWV0YSI6eyJ5Ijp7InBvcyI6IlJJQ0giLCJjc2NIVE1MIjoiPGltZyB3aWR0aD0xIGhlaWdodD0xIGFsdD1cIlwiIHNyYz1cImh0dHBzOlwvXC81LmF0LmF0d29sYS5jb21cL2FkY291bnR8Mi4wfDUxMTMuMXw1MDQzMDQ2fDB8MHxBZElkPS00MTtCbklkPTA7Y3Q9MzU0OTc3NDQ4NztzdD02MjAxO2FkY2lkPTA7aXRpbWU9NjQxMzk3NTMzO3JlcXR5cGU9NTtndWlkPWMyZW43YzVnNHBlbjEmYj0zJnM9NGg7O2ltcHJlZj0xNjE1NjQxMzk3MjUyNjYzMDA3MztpbXByZWZzZXE9ODUwMTExMzQwMTYzOTU2ODk7aW1wcmVmdHM9MTYxNTY0MTM5NzthZGNsbnRpZD0xMDA0O3NwYWNlaWQ9Nzk0MjM2MDE4O2FkcG9zaXRpb249UklDSDtsbXNpZD07cmV2c2hhcmU9O3B2aWQ9VG9NcjZURXdMakhCT3VkaFlFeTY0UUY5TVRrd0xnQUFBQURUbEpKSTtzZWN0aW9uaWQ9O2t2c2VjdXJlJTJEZGFybGE9NCUyRDclMkQxJTdDeXNkJTdDMjtrdm1uPXk5NjM4OTYxNDU7a3Zzc3A9c3NwO2t2c2VjdXJlPXRydWU7a3ZwZ2NvbG89YmYxO2t2eSUyRGJ1Y2tldD1tYnIlMkRoYXJtb255JTJEc2lnbiUyRGluJTJDbWJyJTJEc2lnbmluJTJEd2l0aCUyRGdvb2dsZSUyQ21iciUyRGhhcm1vbnklMkRzaWduJTJEdXAlMkNtYnIlMkRmaWRvJTJEMWZhJTJEbG9naW4lMkNtYnIlMkRsaW5rJTJEYXIlMkNtZTtrdmFkdGMlNUZkdm1rdG5hbWU9dW5rbm93bjtrdmFkdGMlNUZkdm9zcGx0PXdpbmRvd3MlNUYxMDtrdmFkdGMlNUZkdmJyYW5kPW1pY3Jvc29mdDtrdmFkdGMlNUZkdnR5cGU9ZGVza3RvcDtrdmFkdGMlNUZkdm1vZGVsPWVkZ2UlNUYlMkQlNUZ3aW5kb3dzO2t2cmVwbyU1RmR2b3NwbHQ9d2luZG93cyU1RjEwO2t2YWR0YyU1RmR2b3N2ZXJzaW9uPU5UJTIwMTAlMkUwO2t2YWR0YyU1RmNybWNjPVVOS05PV047a3ZhZHRjJTVGY3JtbmM9VU5LTk9XTjtnZHByPTA7XCI+IiwiY3NjVVJJIjoiaHR0cHM6XC9cLzUuYXQuYXR3b2xhLmNvbVwvYWRjb3VudHwyLjB8NTExMy4xfDUwNDMwNDZ8MHwwfEFkSWQ9LTQxO0JuSWQ9MDtjdD0zNTQ5Nzc0NDg3O3N0PTYyMDE7YWRjaWQ9MDtpdGltZT02NDEzOTc1MzM7cmVxdHlwZT01O2d1aWQ9YzJlbjdjNWc0cGVuMSZiPTMmcz00aDs7aW1wcmVmPTE2MTU2NDEzOTcyNTI2NjMwMDczO2ltcHJlZnNlcT04NTAxMTEzNDAxNjM5NTY4OTtpbXByZWZ0cz0xNjE1NjQxMzk3O2FkY2xudGlkPTEwMDQ7c3BhY2VpZD03OTQyMzYwMTg7YWRwb3NpdGlvbj1SSUNIO2xtc2lkPTtyZXZzaGFyZT07cHZpZD1Ub01yNlRFd0xqSEJPdWRoWUV5NjRRRjlNVGt3TGdBQUFBRFRsSkpJO3NlY3Rpb25pZD07a3ZzZWN1cmUlMkRkYXJsYT00JTJENyUyRDElN0N5c2QlN0MyO2t2bW49eTk2Mzg5NjE0NTtrdnNzcD1zc3A7a3ZzZWN1cmU9dHJ1ZTtrdnBnY29sbz1iZjE7a3Z5JTJEYnVja2V0PW1iciUyRGhhcm1vbnklMkRzaWduJTJEaW4lMkNtYnIlMkRzaWduaW4lMkR3aXRoJTJEZ29vZ2xlJTJDbWJyJTJEaGFybW9ueSUyRHNpZ24lMkR1cCUyQ21iciUyRGZpZG8lMkQxZmElMkRsb2dpbiUyQ21iciUyRGxpbmslMkRhciUyQ21lO2t2YWR0YyU1RmR2bWt0bmFtZT11bmtub3duO2t2YWR0YyU1RmR2b3NwbHQ9d2luZG93cyU1RjEwO2t2YWR0YyU1RmR2YnJhbmQ9bWljcm9zb2Z0O2t2YWR0YyU1RmR2dHlwZT1kZXNrdG9wO2t2YWR0YyU1RmR2bW9kZWw9ZWRnZSU1RiUyRCU1RndpbmRvd3M7a3ZyZXBvJTVGZHZvc3BsdD13aW5kb3dzJTVGMTA7a3ZhZHRjJTVGZHZvc3ZlcnNpb249TlQlMjAxMCUyRTA7a3ZhZHRjJTVGY3JtY2M9VU5LTk9XTjtrdmFkdGMlNUZjcm1uYz1VTktOT1dOO2dkcHI9MDsiLCJiZWhhdmlvciI6Im5vbl9leHAiLCJhZElEIjoiMTIzNDU2NyIsIm1hdGNoSUQiOiI5OTk5OTkuOTk5OTk5Ljk5OTk5OS45OTk5OTkiLCJib29rSUQiOiIiLCJzbG90SUQiOiIwIiwic2VydmVUeXBlIjoiNyIsInR0bCI6LTEsImVyciI6ZmFsc2UsImhhc0V4dGVybmFsIjpmYWxzZSwic3VwcF91Z2MiOiIwIiwicGxhY2VtZW50SUQiOi0xLCJmZGIiOm51bGwsInNlcnZlVGltZSI6LTEsImltcElEIjoiIiwiY3JlYXRpdmVJRCI6LTEsImFkYyI6IntcImxhYmVsXCI6XCJBZENob2ljZXNcIixcInVybFwiOlwiaHR0cHM6XFxcL1xcXC9pbmZvLnlhaG9vLmNvbVxcXC9wcml2YWN5XFxcL3VzXFxcL3lhaG9vXFxcL3JlbGV2YW50YWRzLmh0bWxcIixcImNsb3NlXCI6XCJDbG9zZVwiLFwiY2xvc2VBZFwiOlwiQ2xvc2UgQWRcIixcInNob3dBZFwiOlwiU2hvdyBhZFwiLFwiY29sbGFwc2VcIjpcIkNvbGxhcHNlXCIsXCJmZGJcIjpcIkkgZG9uJ3QgbGlrZSB0aGlzIGFkXCIsXCJjb2RlXCI6XCJlbi11c1wifSIsImlzM3JkIjoxLCJmYWNTdGF0dXMiOnsiZmVkU3RhdHVzQ29kZSI6IjIiLCJmZWRTdGF0dXNNZXNzYWdlIjoiWUFYXC9ZQU1cL1lBWFIgaXMgdGhlIHdpbm5lciBiZWNhdXNlIG9mIG5vLWFkIGZyb20gZ2QyIn0sInVzZXJQcm92aWRlZERhdGEiOnt9LCJmYWNSb3RhdGlvbiI6e30sInNsb3REYXRhIjp7fSwic2l6ZSI6IjE0NDB4MTAyNCJ9fSwiY29uZiI6eyJ3IjoxNDQwLCJoIjoxMDI0fX1dLCJjb25mIjp7InVzZVlBQyI6MCwidXNlUEUiOjEsInNlcnZpY2VQYXRoIjoiIiwieHNlcnZpY2VQYXRoIjoiIiwiYmVhY29uUGF0aCI6IiIsInJlbmRlclBhdGgiOiIiLCJhbGxvd0ZpRiI6ZmFsc2UsInNyZW5kZXJQYXRoIjoiaHR0cHM6XC9cL3MueWltZy5jb21cL3JxXC9kYXJsYVwvNC03LTFcL2h0bWxcL3Itc2YuaHRtbCIsInJlbmRlckZpbGUiOiJodHRwczpcL1wvcy55aW1nLmNvbVwvcnFcL2RhcmxhXC80LTctMVwvaHRtbFwvci1zZi5odG1sIiwic2ZicmVuZGVyUGF0aCI6Imh0dHBzOlwvXC9zLnlpbWcuY29tXC9ycVwvZGFybGFcLzQtNy0xXC9odG1sXC9yLXNmLmh0bWwiLCJtc2dQYXRoIjoiaHR0cHM6XC9cL2ZjLnlhaG9vLmNvbVwvdW5zdXBwb3J0ZWQtMTk0Ni5odG1sIiwiY3NjUGF0aCI6Imh0dHBzOlwvXC9zLnlpbWcuY29tXC9ycVwvZGFybGFcLzQtNy0xXC9odG1sXC9yLWNzYy5odG1sIiwicm9vdCI6InNkYXJsYSIsImVkZ2VSb290IjoiaHR0cHM6XC9cL3MueWltZy5jb21cL3JxXC9kYXJsYVwvNC03LTEiLCJzZWRnZVJvb3QiOiJodHRwczpcL1wvcy55aW1nLmNvbVwvcnFcL2RhcmxhXC80LTctMSIsInZlcnNpb24iOiI0LTctMSIsInRwYlVSSSI6IiIsImhvc3RGaWxlIjoiaHR0cHM6XC9cL3MueWltZy5jb21cL3JxXC9kYXJsYVwvNC03LTFcL2pzXC9nLXItbWluLmpzIiwiZmRiX2xvY2FsZSI6IldoYXQgZG9uJ3QgeW91IGxpa2UgYWJvdXQgdGhpcyBhZD98SXQncyBvZmZlbnNpdmV8U29tZXRoaW5nIGVsc2V8VGhhbmsgeW91IGZvciBoZWxwaW5nIHVzIGltcHJvdmUgeW91ciBZYWhvbyBleHBlcmllbmNlfEl0J3Mgbm90IHJlbGV2YW50fEl0J3MgZGlzdHJhY3Rpbmd8SSBkb24ndCBsaWtlIHRoaXMgYWR8U2VuZHxEb25lfFdoeSBkbyBJIHNlZSBhZHM/fExlYXJuIG1vcmUgYWJvdXQgeW91ciBmZWVkYmFjay58V2FudCBhbiBhZC1mcmVlIGluYm94PyBVcGdyYWRlIHRvIFlhaG9vIE1haWwgUHJvIXxVcGdyYWRlIE5vdyIsInBvc2l0aW9ucyI6eyJSSUNIIjp7ImRlc3QiOiJ0Z3RSSUNIIiwiYXN6IjoiZmxleCIsImlkIjoiUklDSCIsInciOjE0NDAsImgiOjEwMjR9fSwicHJvcGVydHkiOiIiLCJldmVudHMiOltdLCJsYW5nIjoiZW4tdXMiLCJzcGFjZUlEIjoiNzk0MjM2MDE4IiwiZGVidWciOmZhbHNlLCJhc1N0cmluZyI6IntcInVzZVlBQ1wiOjAsXCJ1c2VQRVwiOjEsXCJzZXJ2aWNlUGF0aFwiOlwiXCIsXCJ4c2VydmljZVBhdGhcIjpcIlwiLFwiYmVhY29uUGF0aFwiOlwiXCIsXCJyZW5kZXJQYXRoXCI6XCJcIixcImFsbG93RmlGXCI6ZmFsc2UsXCJzcmVuZGVyUGF0aFwiOlwiaHR0cHM6XFxcL1xcXC9zLnlpbWcuY29tXFxcL3JxXFxcL2RhcmxhXFxcLzQtNy0xXFxcL2h0bWxcXFwvci1zZi5odG1sXCIsXCJyZW5kZXJGaWxlXCI6XCJodHRwczpcXFwvXFxcL3MueWltZy5jb21cXFwvcnFcXFwvZGFybGFcXFwvNC03LTFcXFwvaHRtbFxcXC9yLXNmLmh0bWxcIixcInNmYnJlbmRlclBhdGhcIjpcImh0dHBzOlxcXC9cXFwvcy55aW1nLmNvbVxcXC9ycVxcXC9kYXJsYVxcXC80LTctMVxcXC9odG1sXFxcL3Itc2YuaHRtbFwiLFwibXNnUGF0aFwiOlwiaHR0cHM6XFxcL1xcXC9mYy55YWhvby5jb21cXFwvdW5zdXBwb3J0ZWQtMTk0Ni5odG1sXCIsXCJjc2NQYXRoXCI6XCJodHRwczpcXFwvXFxcL3MueWltZy5jb21cXFwvcnFcXFwvZGFybGFcXFwvNC03LTFcXFwvaHRtbFxcXC9yLWNzYy5odG1sXCIsXCJyb290XCI6XCJzZGFybGFcIixcImVkZ2VSb290XCI6XCJodHRwczpcXFwvXFxcL3MueWltZy5jb21cXFwvcnFcXFwvZGFybGFcXFwvNC03LTFcIixcInNlZGdlUm9vdFwiOlwiaHR0cHM6XFxcL1xcXC9zLnlpbWcuY29tXFxcL3JxXFxcL2RhcmxhXFxcLzQtNy0xXCIsXCJ2ZXJzaW9uXCI6XCI0LTctMVwiLFwidHBiVVJJXCI6XCJcIixcImhvc3RGaWxlXCI6XCJodHRwczpcXFwvXFxcL3MueWltZy5jb21cXFwvcnFcXFwvZGFybGFcXFwvNC03LTFcXFwvanNcXFwvZy1yLW1pbi5qc1wiLFwiZmRiX2xvY2FsZVwiOlwiV2hhdCBkb24ndCB5b3UgbGlrZSBhYm91dCB0aGlzIGFkP3xJdCdzIG9mZmVuc2l2ZXxTb21ldGhpbmcgZWxzZXxUaGFuayB5b3UgZm9yIGhlbHBpbmcgdXMgaW1wcm92ZSB5b3VyIFlhaG9vIGV4cGVyaWVuY2V8SXQncyBub3QgcmVsZXZhbnR8SXQncyBkaXN0cmFjdGluZ3xJIGRvbid0IGxpa2UgdGhpcyBhZHxTZW5kfERvbmV8V2h5IGRvIEkgc2VlIGFkcz98TGVhcm4gbW9yZSBhYm91dCB5b3VyIGZlZWRiYWNrLnxXYW50IGFuIGFkLWZyZWUgaW5ib3g/IFVwZ3JhZGUgdG8gWWFob28gTWFpbCBQcm8hfFVwZ3JhZGUgTm93XCIsXCJwb3NpdGlvbnNcIjp7XCJSSUNIXCI6e1wiZGVzdFwiOlwidGd0UklDSFwiLFwiYXN6XCI6XCJmbGV4XCIsXCJpZFwiOlwiUklDSFwiLFwid1wiOjE0NDAsXCJoXCI6MTAyNH19LFwicHJvcGVydHlcIjpcIlwiLFwiZXZlbnRzXCI6W10sXCJsYW5nXCI6XCJlbi11c1wiLFwic3BhY2VJRFwiOlwiNzk0MjM2MDE4XCIsXCJkZWJ1Z1wiOmZhbHNlfSJ9LCJtZXRhIjp7InkiOnsicGFnZUVuZEhUTUwiOiI8IS0tIFBhZ2UgRW5kIEhUTUwgLS0+IiwicG9zX2xpc3QiOlsiUklDSCJdLCJ0cmFuc0lEIjoiZGFybGFfcHJlZmV0Y2hfMTYxNTY0MTM5NzQ4MF8xNDUyMTg0NzEyXzMiLCJrMl91cmkiOiIiLCJmYWNfcnQiOi0xLCJ0dGwiOi0xLCJzcGFjZUlEIjoiNzk0MjM2MDE4IiwibG9va3VwVGltZSI6OTAsInByb2NUaW1lIjo5MCwibnB2IjowLCJwdmlkIjoiVG9NcjZURXdMakhCT3VkaFlFeTY0UUY5TVRrd0xnQUFBQURUbEpKSSIsInNlcnZlVGltZSI6LTEsImVwIjp7InNpdGUtYXR0cmlidXRlIjoiZ2VtaW5pZmVkPTEgeS1idWNrZXQ9bWJyLWhhcm1vbnktc2lnbi1pbixtYnItc2lnbmluLXdpdGgtZ29vZ2xlLG1ici1oYXJtb255LXNpZ24tdXAsbWJyLWZpZG8tMWZhLWxvZ2luLG1ici1saW5rLWFyLG1lc3Nlbmdlci10cnVzdGVkLWFyLXYxLG1ici1zaXdnLXJlZy1jb250cm9sIiwidGd0IjoiX2JsYW5rIiwic2VjdXJlIjp0cnVlLCJyZWYiOiJodHRwczpcL1wvbG9naW4ueWFob28uY29tXC8iLCJmaWx0ZXIiOiJub19leHBhbmRhYmxlO2V4cF9pZnJhbWVfZXhwYW5kYWJsZTsiLCJkYXJsYUlEIjoiZGFybGFfaW5zdGFuY2VfMTYxNTY0MTM5NzQ4MF84MTU0MTg3NzBfMiJ9LCJweW0iOnsiLiI6InYwLjAuOTs7LTsifSwiaG9zdCI6IiIsImZpbHRlcmVkIjpbXSwicGUiOiIifX19"));

